<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>MADHOUSE ADVENTSKALENDER</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google-Fonts: Ã¤hnlich wie beim MyAdvent-Design -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Fredoka:wght@600;700&family=Dancing+Script:wght@500;600&display=swap"
    rel="stylesheet"
  >

  <style>
    :root {
      --door-main: #E05D47;          /* MyAdvent-Hellrot */
      --door-locked: #b44834;        /* etwas dunkler fÃ¼r gesperrte Tage */
      --door-text: #ffffff;
      --overlay-bg: rgba(0, 0, 0, 0.75);
      --panel-bg: rgba(5, 10, 20, 0.95);
      --accent: #ffd166;
      --text: #f8f9fa;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      color: var(--text);

      /* dein Hintergrundbild */
      background-image: url("background.jpg");
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      min-height: 100vh;
    }

    .page-overlay {
      min-height: 100vh;
      background: radial-gradient(
        circle at top,
        rgba(0, 0, 0, 0.3),
        rgba(0, 0, 0, 0.8)
      );
      display: flex;
      flex-direction: column;
      align-items: stretch;
    }

    header {
      text-align: center;
      padding: 1.5rem 1rem 0.5rem;
    }

    .title-box {
      display: inline-block;
      padding: 0.9rem 2.4rem 0.7rem;
      border-radius: 0.8rem;
      background: rgba(110, 103, 148, 0.9); /* lila wie beim MyAdvent-Banner */
      border: 2px dashed rgba(255, 255, 255, 0.85);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.7);
    }

    .title-main {
      margin: 0;
      font-family: "Fredoka", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
      font-size: clamp(1.8rem, 3.4vw, 2.6rem);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      text-align: center;
    }

    .title-sub {
      margin: 0.25rem 0 0;
      font-family: "Dancing Script", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", cursive;
      font-size: clamp(1.1rem, 2.1vw, 1.4rem);
      text-align: center;
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1.2rem 1rem 2rem;
    }

    .calendar {
      width: 100%;
      max-width: 760px;
      margin: 0 auto;
      display: flex;
      justify-content: center;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(6, minmax(0, 1fr));
      gap: 0.7rem;
      width: 100%;
      padding: 0.75rem;
    }

    @media (max-width: 700px) {
      .calendar-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    @media (max-width: 480px) {
      .calendar-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .door {
      border-radius: 0;             /* rechteckig */
      border: none;
      padding: 0.9rem 0.4rem;
      cursor: pointer;
      font-size: clamp(1rem, 2.6vw, 1.3rem);
      font-weight: 700;
      color: var(--door-text);
      background: var(--door-main);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.7);
      transition: transform 0.12s ease, box-shadow 0.12s ease,
        background 0.18s ease, opacity 0.18s ease;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.9);
    }

    .door-openable {
      background: var(--door-main);
    }

    .door-openable:hover {
      transform: translateY(-2px);
      box-shadow: 0 9px 18px rgba(0, 0, 0, 0.85);
    }

    .door-openable:active {
      transform: translateY(1px);
      box-shadow: 0 4px 9px rgba(0, 0, 0, 0.6);
    }

    .door-locked {
      background: var(--door-locked);
      opacity: 0.75;
    }

    .door-locked:disabled {
      cursor: not-allowed;
    }

    /* Kein Footer-Text mehr â€“ darum kein footer-Styling */

    /* MODAL / INHALTSFENSTER */

    .modal-backdrop {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: var(--overlay-bg);
      z-index: 20;
      padding: 1rem;
    }

    .modal-backdrop.visible {
      display: flex;
    }

    .modal {
      position: relative;
      width: 100%;
      max-width: 720px;
      max-height: 90vh;
      overflow-y: auto;
      background: var(--panel-bg);
      border-radius: 1.2rem;
      padding: 1.25rem 1.3rem 1.6rem;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.9);
    }

    .modal h2 {
      margin: 0 0 0.7rem;
      font-size: clamp(1.4rem, 2.4vw, 1.7rem);
      color: var(--accent);
    }

    .modal p {
      margin-top: 0;
      line-height: 1.5;
      font-size: 0.98rem;
    }

    .close-button {
      position: absolute;
      top: 0.1rem;
      right: 0.7rem;
      border: none;
      background: none;
      color: var(--text);
      font-size: 1.8rem;
      cursor: pointer;
    }

    .content-media {
      margin-top: 1rem;
      display: none;
      justify-content: center;
    }

    .content-media.visible {
      display: flex;
    }

    .content-media img,
    .content-media video,
    .content-media iframe {
      max-width: 100%;
      border-radius: 0.8rem;
      max-height: 420px;
    }

    .content-media audio {
      width: 100%;
    }
  </style>
</head>
<body>
  <div class="page-overlay">
    <header>
      <div class="title-box">
        <h1 class="title-main">Madhouse Adventskalender</h1>
        <p class="title-sub">Made by Eltern</p>
      </div>
    </header>

    <main>
      <section class="calendar">
        <div id="calendar-grid" class="calendar-grid"></div>
      </section>
    </main>
  </div>

  <!-- MODAL fÃ¼r Inhalte -->
  <div id="modal-backdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="content-title">
      <button id="close-button" class="close-button" aria-label="SchlieÃŸen">Ã—</button>
      <h2 id="content-title"></h2>
      <p id="content-text"></p>

      <div id="image-wrapper" class="content-media">
        <img id="content-image" alt="" />
      </div>

      <div id="audio-wrapper" class="content-media">
        <audio id="content-audio" controls></audio>
      </div>

      <div id="video-wrapper" class="content-media">
        <video id="content-video" controls></video>
      </div>

      <div id="youtube-wrapper" class="content-media">
        <iframe
          id="content-youtube"
          src=""
          frameborder="0"
          allowfullscreen
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        ></iframe>
      </div>
    </div>
  </div>

  <script>
    /*
      HIER TRAGST DU DEINE INHALTE EIN:

      FÃ¼r jeden Tag (1â€“24) kannst du beliebige Kombinationen nutzen:

      title: Ãœberschrift (optional)
      text: Text / Botschaft / Aufgabe
      image: Bild-URL (z.B. "bilder/tag1.jpg" oder "https://.../bild.jpg")
      imageAlt: Alternativtext fÃ¼rs Bild
      audio: Audio-Datei (z.B. "audio/tag1.mp3")
      video: Video-Datei (z.B. "video/tag1.mp4")
      youtube: YouTube-Link ("https://www.youtube.com/watch?v=...")

      Beispiel-Kombinationen:
      - nur Text          â†’ { text: "..." }
      - Text + Bild       â†’ { text: "...", image: "bilder/...", imageAlt: "..." }
      - nur Audio         â†’ { audio: "audio/..." }
      - Audio + Text      â†’ { text: "...", audio: "audio/..." }
      - Video + Text      â†’ { text: "...", video: "video/..." }
      - YouTube + Text    â†’ { text: "...", youtube: "https://youtube..." }
    */

    const adventContent = {
      1: {
        title: "1. Dezember ðŸŽ…",
        text: "Heute startet der Madhouse Adventskalender. Heute Abend machen wir es uns gemeinsam gemÃ¼tlich."
      },
      2: {
        title: "2. Dezember â„ï¸",
        text: "Heute gibt es eine kleine Ãœberraschung in der KÃ¼che. Schau nach dem Abendessen nach."
      },
      3: {
        title: "3. Dezember âœ¨",
        text: "Hier kÃ¶nnte ein Text mit Bild stehen.",
        // image: "bilder/tag3.jpg",
        // imageAlt: "Beispiel-Bild"
      },
      4: {
        title: "4. Dezember ðŸŽ§",
        text: "Heute liest Mama oder Papa euch eine Geschichte vor â€“ hier ist die Audio-Version:",
        // audio: "audio/geschichte4.mp3"
      },
      5: {
        title: "5. Dezember ðŸŽ¬",
        text: "Ein kleines Video nur fÃ¼r euch:",
        // video: "video/tag5.mp4"
        // oder:
        // youtube: "https://www.youtube.com/watch?v=DEIN_VIDEO_ID"
      },
      // â€¦ weitere Tage nach dem gleichen Muster â€¦
      24: {
        title: "24. Dezember â€“ Frohe Weihnachten ðŸŽ",
        text: "Wir sind so dankbar, dass wir euch haben. Ihr seid unser grÃ¶ÃŸtes Geschenk."
      }
    };

    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    function isPreviewMode() {
      return getQueryParam("preview") === "1";
    }

    // TÃ¼rchen sind nur bis zum heutigen Tag (im Dezember) geÃ¶ffnet.
    function isDayOpenable(day) {
      if (isPreviewMode()) return true; // Eltern-Vorschau

      const today = new Date();
      if (today.getMonth() !== 11) {
        // nicht Dezember â†’ alles zu
        return false;
      }
      return today.getDate() >= day;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const grid = document.getElementById("calendar-grid");
      const modalBackdrop = document.getElementById("modal-backdrop");
      const closeButton = document.getElementById("close-button");

      const titleEl = document.getElementById("content-title");
      const textEl = document.getElementById("content-text");
      const imgWrapper = document.getElementById("image-wrapper");
      const imgEl = document.getElementById("content-image");
      const audioWrapper = document.getElementById("audio-wrapper");
      const audioEl = document.getElementById("content-audio");
      const videoWrapper = document.getElementById("video-wrapper");
      const videoEl = document.getElementById("content-video");
      const ytWrapper = document.getElementById("youtube-wrapper");
      const ytEl = document.getElementById("content-youtube");

      // TÃ¼ren erzeugen (1â€“24)
      for (let day = 1; day <= 24; day++) {
        const btn = document.createElement("button");
        btn.className = "door";
        btn.textContent = day;

        if (isDayOpenable(day)) {
          btn.classList.add("door-openable");
          btn.addEventListener("click", () => openDoor(day));
        } else {
          btn.classList.add("door-locked");
          btn.disabled = true;
        }

        grid.appendChild(btn);
      }

      function openDoor(day) {
        const data = adventContent[day];
        if (!data) {
          alert("FÃ¼r diesen Tag ist noch kein Inhalt eingetragen.");
          return;
        }

        titleEl.textContent = data.title || `Tag ${day}`;
        textEl.textContent = data.text || "";

        // Medien zurÃ¼cksetzen
        imgWrapper.classList.remove("visible");
        audioWrapper.classList.remove("visible");
        videoWrapper.classList.remove("visible");
        ytWrapper.classList.remove("visible");
        imgEl.src = "";
        audioEl.src = "";
        videoEl.src = "";
        ytEl.src = "";

        if (data.image) {
          imgEl.src = data.image;
          imgEl.alt = data.imageAlt || "";
          imgWrapper.classList.add("visible");
        }
        if (data.audio) {
          audioEl.src = data.audio;
          audioWrapper.classList.add("visible");
        }
        if (data.video) {
          videoEl.src = data.video;
          videoWrapper.classList.add("visible");
        }
        if (data.youtube) {
          try {
            const url = new URL(data.youtube);
            let videoId = url.searchParams.get("v");
            if (!videoId && url.hostname === "youtu.be") {
              videoId = url.pathname.replace("/", "");
            }
            if (!videoId && url.pathname.startsWith("/shorts/")) {
              videoId = url.pathname.split("/")[2];
            }
            if (videoId) {
              ytEl.src = "https://www.youtube.com/embed/" + videoId;
              ytWrapper.classList.add("visible");
            }
          } catch (e) {
            console.warn("UngÃ¼ltige YouTube-URL:", data.youtube);
          }
        }

        modalBackdrop.classList.add("visible");
        modalBackdrop.setAttribute("aria-hidden", "false");
      }

      function closeModal() {
        modalBackdrop.classList.remove("visible");
        modalBackdrop.setAttribute("aria-hidden", "true");
        audioEl.pause();
        videoEl.pause();
        ytEl.src = "";
      }

      closeButton.addEventListener("click", closeModal);
      modalBackdrop.addEventListener("click", (e) => {
        if (e.target === modalBackdrop) {
          closeModal();
        }
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeModal();
        }
      });
    });
  </script>
</body>
</html>
